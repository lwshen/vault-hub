# API Key endpoint definitions

apiKeys:
  get:
    description: Get API keys for the current user with pagination
    tags:
      - APIKey
    operationId: getAPIKeys
    parameters:
      - name: pageSize
        in: query
        required: true
        description: Number of API keys per page (default 20, max 1000)
        schema:
          type: integer
          minimum: 1
          maximum: 1000
          default: 20
      - name: pageIndex
        in: query
        required: true
        description: Page index, starting from 1 (default 1)
        schema:
          type: integer
          minimum: 1
          default: 1
    responses:
      "200":
        description: List of API keys
        content:
          application/json:
            schema:
              $ref: ../schemas/apikey.yaml#/APIKeysResponse
  post:
    description: Create a new API key
    tags:
      - APIKey
    operationId: createAPIKey
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ../schemas/apikey.yaml#/CreateAPIKeyRequest
    responses:
      "201":
        description: API key created successfully
        content:
          application/json:
            schema:
              $ref: ../schemas/apikey.yaml#/CreateAPIKeyResponse
apiKeyById:
  patch:
    description: Update an API key (enable/disable or modify properties)
    tags:
      - APIKey
    operationId: updateAPIKey
    parameters:
      - name: id
        in: path
        required: true
        description: API Key ID
        schema:
          type: integer
          format: int64
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ../schemas/apikey.yaml#/UpdateAPIKeyRequest
    responses:
      "200":
        description: API key updated successfully
        content:
          application/json:
            schema:
              $ref: ../schemas/apikey.yaml#/VaultAPIKey
  delete:
    description: Delete an API key
    tags:
      - APIKey
    operationId: deleteAPIKey
    parameters:
      - name: id
        in: path
        required: true
        description: API Key ID
        schema:
          type: integer
          format: int64
    responses:
      "204":
        description: API key deleted successfully
apiKeyUsage:
  get:
    description: Get usage statistics for a specific API key
    tags:
      - APIKey
    operationId: getAPIKeyUsage
    parameters:
      - name: id
        in: path
        required: true
        description: API Key ID
        schema:
          type: integer
          format: int64
    responses:
      "200":
        description: API key usage statistics
        content:
          application/json:
            schema:
              $ref: ../schemas/apikey.yaml#/APIKeyUsageResponse
      "404":
        description: API key not found
      "403":
        description: Forbidden - API key does not belong to the user
